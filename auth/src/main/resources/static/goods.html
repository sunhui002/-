<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div style="margin-top:70px;" id="product" ></div>
<div style="margin-top:640px;margin-left:200px;">
    <div  id="layuipage" ></div>
</div>
</body>
<script>
    layui.use(['jquery', 'layer', 'miniAdmin', 'miniTongji', 'laypage'], function () {
    var $ = layui.jquery,
    layer = layui.layer,
    miniAdmin = layui.miniAdmin,
    miniTongji = layui.miniTongji,
    laypage = layui.laypage;

    var page = 1;//当前页
    var limit = 16;//每页显示的数目
    var resCount, resData ;
    var resPage = renderPage1();

    //渲染展示商品的html页面
    function renderProductHtml(data){
    var str = "";//用来存储html内容
    if(data.length > 0){
    $.each(data, function(v, o){
    str += "<div style='margin:auto; margin-bottom:130px;  width:150px; height:150px; float:left; text-align:center'><div><img alt='' src='"+o.imgPath+"' width='150px' height='150px'/></div>";
        str += "<div style='text-align:left'><div><label>商品名称:</label><span>"+o.productName+"</span></div>";
            str += "<div><label>价格:</label><span style='color:#FF3030;'>￥"+o.price+"</span></div>";
            str += "<div><label>新旧程度:</label><span>"+o.degree+"</span></div>";
            str += "<div><label>销量:</label><span style='color:#CDC9C9;'>"+o.sales+"</span>";
                str += "<label>库存:</label><span style='color:#CDC9C9;'>"+o.stock+"</span></div>";
            str += "<div style='display:none;'><label>商品ID:</label><span>"+o.product_id+"</span></div></div></div>";
    });
    $("#product").html(str);
    }

    }


    //同步加载商品数据
    function renderProduct(page, limit){
    $.ajax({
    async: false,
    url: '/UsedProduct/product/getProductPage',
    data: {"page": page, "limit": limit},
    dataType: 'json',
    success: function(result){
    console.info(result);
    resCount = result.count;
    resData = result.data;
    renderProductHtml(resData);
    }
    });
    }


    //分页的完整功能
    function renderPage1(){
    renderProduct(page, limit);
    laypage.render({
    elem: 'layuipage'
    ,count: resCount
    ,limit: limit
    ,limits: [limit]
    ,curr: page
    ,theme: '#FFB800'
    ,layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
    ,jump: function(obj, first){
    console.info(obj);
    page = obj.curr;
    if(!first){
    renderProduct(page, limit);
    }
    }
    });
    }
    });
</script>


</html>